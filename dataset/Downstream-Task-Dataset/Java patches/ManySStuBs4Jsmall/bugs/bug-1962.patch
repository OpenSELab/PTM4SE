diff --git a/modules/cpr/src/main/java/org/atmosphere/websocket/WebSocket.java b/modules/cpr/src/main/java/org/atmosphere/websocket/WebSocket.java
index 9fd5a3f..823b528 100644
--- a/modules/cpr/src/main/java/org/atmosphere/websocket/WebSocket.java
+++ b/modules/cpr/src/main/java/org/atmosphere/websocket/WebSocket.java
@@ -202,7 +202,7 @@
             }
 
             if (b != null) {
-                write(b, 0, length);
+                write(b, 0, b.length);
             }
         } else {
             String data = null;
diff --git a/modules/cpr/src/main/java/org/atmosphere/websocket/WebSocket.java b/modules/cpr/src/main/java/org/atmosphere/websocket/WebSocket.java
index 9fd5a3f..823b528 100644
--- a/modules/cpr/src/main/java/org/atmosphere/websocket/WebSocket.java
+++ b/modules/cpr/src/main/java/org/atmosphere/websocket/WebSocket.java
@@ -202,7 +202,7 @@
             }
 
             if (b != null) {
-                write(b, 0, length);
+                write(b, 0, b.length);
             }
         } else {
             String data = null;
