diff --git a/src/api/org/openmrs/arden/Call.java b/src/api/org/openmrs/arden/Call.java
index a34273b..d3cfd22 100644
--- a/src/api/org/openmrs/arden/Call.java
+++ b/src/api/org/openmrs/arden/Call.java
@@ -76,7 +76,7 @@
 				 w.append("\t\t\t\t}\n");
 				 w.append("\t\t\t\telse\n");
 				 w.append("\t\t\t\t{\n");
-				 w.append("\t\t\t\t\tvalue = resultLookup.get(variable).toString();\n");
+				 w.append("\t\t\t\t\tvalue = resultLookup.get(" +"\"" + currParam + "\""  + ").toString();\n");
 				 w.append("\t\t\t\t}\n");
 				 w.append("\t\t\t\tif(value != null){\n");
 				 w.append("\t\t\t\t\tparameters.put(\"param" + (i+1) + "\"," + "value);\n"); 
diff --git a/src/api/org/openmrs/arden/Call.java b/src/api/org/openmrs/arden/Call.java
index a34273b..d3cfd22 100644
--- a/src/api/org/openmrs/arden/Call.java
+++ b/src/api/org/openmrs/arden/Call.java
@@ -76,7 +76,7 @@
 				 w.append("\t\t\t\t}\n");
 				 w.append("\t\t\t\telse\n");
 				 w.append("\t\t\t\t{\n");
-				 w.append("\t\t\t\t\tvalue = resultLookup.get(variable).toString();\n");
+				 w.append("\t\t\t\t\tvalue = resultLookup.get(" +"\"" + currParam + "\""  + ").toString();\n");
 				 w.append("\t\t\t\t}\n");
 				 w.append("\t\t\t\tif(value != null){\n");
 				 w.append("\t\t\t\t\tparameters.put(\"param" + (i+1) + "\"," + "value);\n"); 
