diff --git a/Essentials/src/com/earth2me/essentials/Essentials.java b/Essentials/src/com/earth2me/essentials/Essentials.java
index 3c0a35b..10cdbb5 100644
--- a/Essentials/src/com/earth2me/essentials/Essentials.java
+++ b/Essentials/src/com/earth2me/essentials/Essentials.java
@@ -356,7 +356,7 @@
 		{
 			for (Plugin p : getServer().getPluginManager().getPlugins())
 			{
-				if (p == this)
+				if (p.getDescription().getMain().contains("com.earth2me.essentials"))
 				{
 					continue;
 				}
diff --git a/Essentials/src/com/earth2me/essentials/Essentials.java b/Essentials/src/com/earth2me/essentials/Essentials.java
index 3c0a35b..10cdbb5 100644
--- a/Essentials/src/com/earth2me/essentials/Essentials.java
+++ b/Essentials/src/com/earth2me/essentials/Essentials.java
@@ -356,7 +356,7 @@
 		{
 			for (Plugin p : getServer().getPluginManager().getPlugins())
 			{
-				if (p == this)
+				if (p.getDescription().getMain().contains("com.earth2me.essentials"))
 				{
 					continue;
 				}
